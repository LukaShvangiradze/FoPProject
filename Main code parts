package BASICInterpreter;

import java.util.*;

public class InterpreterMain {

    private static Map<String, Integer> map = new HashMap<>();

    private static boolean bigInd = true;

    public void eval(String code) {
        String[] lines = code.split("\n");
         for(int i = 0; i < lines.length; i++) {
            lines[i] = lines[i].trim();
            if (lines[i].isEmpty()) continue;

            //INTEGER ebis garda araferi
            //10+20-30, 0 ze gayofa danashtva, if an else shi bevri rame
             //if shi number - 10 >5
             //error ebis povna ara
             //input ar gvaq
             //FOR, while

            if(lines[i].startsWith("DIM ")) {
                handleDim(lines[i]);
            }
            if(lines[i].startsWith("PRINT ")) {
                handlePrint(lines[i]);
            }
            if(lines[i].startsWith("IF ")) {
                boolean ind = handleIf(lines[i]);
                if(!ind) {i += 2; bigInd = false;}
            }
            if(lines[i].startsWith("ELSE ") && !bigInd) {bigInd = true; continue;}
            if(lines[i].startsWith("ELSE ") && bigInd) {
                for(int j = i; j < lines.length; j++) {
                    if(lines[j].startsWith("END ")) {
                        i = j;
                        break;
                    }
                }
            }
            if(lines[i].startsWith("END ")) continue;
            if(lines[i].contains("=")) {
                handleAssignment(lines[i]);
            }
        }
    }


    public static void main(String[] args) {

        InterpreterMain interpreter = new InterpreterMain();

        Scanner sc = new Scanner(System.in);

        String program = "";

        while(sc.hasNextLine()) {
            program += sc.nextLine();
            program += '\n';
            //press CTRL+D to stop
        }

        interpreter.eval(program);

    }

}
